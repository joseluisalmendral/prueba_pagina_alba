<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Rutina de 8 semanas, calistenia y comba para principiantes. Gu√≠a cari√±osa de Jose con mensajes de √°nimo." />
  <meta name="theme-color" content="#7e22ce" />
  <title>Gu√≠a Fitness de Jose üíú</title>
  <style>
    :root{
      --bg:#0f0a14;
      --card:#171022;
      --text:#f7f5fb;
      --muted:#cfc6db;
      --accent:#7e22ce;
      --accent-2:#ec4899;
      --ok:#22c55e;
      --warn:#f59e0b;
      --danger:#ef4444;
      --shadow:0 10px 25px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height:1.6; color:var(--text); background: radial-gradient(1200px 800px at 100% -10%, rgba(236,72,153,.08), transparent 60%),
      radial-gradient(1200px 800px at -10% 110%, rgba(126,34,206,.09), transparent 60%), var(--bg);
    }

    /* Header mejorado */
    header.hero{
      position:sticky; top:0; z-index:50; backdrop-filter: blur(12px);
      background: linear-gradient(90deg, rgba(126,34,206,.92), rgba(236,72,153,.92));
      border-bottom:1px solid rgba(255,255,255,.12);
      transition: transform .3s ease, opacity .3s ease;
    }
    header.hero.hide{ transform: translateY(-100%); opacity: 0; }
    
    .wrap{max-width:1000px;margin:0 auto;padding:16px}
    .hero .wrap{display:flex; gap:12px; align-items:center; justify-content:space-between}
    .title{display:flex; gap:12px; align-items:center; flex:1}
    .title h1{margin:0; font-size: clamp(1.1rem, 2vw, 1.4rem); font-weight:800}
    .subtitle{margin:2px 0 0; font-size:.85rem; color:#fff; opacity:.9}

    /* Hamburguesa mejorada */
    .hamburger{
      display:flex; align-items:center; justify-content:center; gap:6px; 
      padding:8px; border-radius:10px; border:1px solid rgba(255,255,255,.2); 
      background:rgba(255,255,255,.1); color:#fff; font-weight:600; font-size:.9rem;
      backdrop-filter: blur(8px); cursor: pointer; transition: all .2s ease;
    }
    .hamburger:hover{ background:rgba(255,255,255,.15); transform: scale(1.02); }
    .hamburger:active{ transform: scale(0.98); }
    
    .bars{position:relative; width:16px; height:2px; background:#fff; display:block; transition:.2s}
    .bars::before, .bars::after{content:''; position:absolute; left:0; right:0; height:2px; background:#fff; transition:.2s}
    .bars::before{top:-5px} .bars::after{top:5px}
    .hamburger.active .bars{background:transparent}
    .hamburger.active .bars::before{top:0; transform:rotate(45deg)}
    .hamburger.active .bars::after{top:0; transform:rotate(-45deg)}

    /* Panel m√≥vil mejorado */
    .mnav{
      position:fixed; top:0; right:0; width:min(85%, 320px); height:100vh; 
      background:var(--card); border-left:1px solid rgba(255,255,255,.15); 
      box-shadow:var(--shadow); transform:translateX(100%); transition:transform .25s ease; 
      z-index:60; padding:20px 16px; overflow:auto; backdrop-filter: blur(16px);
    }
    .mnav.open{transform:translateX(0)}
    .mnav .nav-header{
      display:flex; justify-content:space-between; align-items:center; 
      margin-bottom:24px; padding-bottom:12px; border-bottom:1px solid rgba(255,255,255,.1);
    }
    .mnav h3{margin:0; font-size:1.1rem; color:var(--accent)}
    .close-btn{
      background:rgba(255,255,255,.1); color:#fff; border:1px solid rgba(255,255,255,.2); 
      border-radius:8px; padding:4px 8px; font-size:.9rem; cursor:pointer;
    }
    .mnav a{
      display:block; color:var(--text); text-decoration:none; padding:12px 16px; 
      font-weight:600; border-radius:12px; background:rgba(255,255,255,.04); 
      margin:8px 0; transition: all .2s ease; border:1px solid transparent;
    }
    .mnav a:hover{background:rgba(126,34,206,.15); border-color:rgba(126,34,206,.3)}
    .mnav a.active{background:var(--accent); color:#fff}

    .scrim{position:fixed; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(3px); opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:55}
    .scrim.show{opacity:1; pointer-events:auto}
    body.menu-open{overflow:hidden}

    /* Navegaci√≥n por vistas */
    .view{display:none; min-height:calc(100vh - 120px)}
    .view.active{display:block}
    
    main{padding: 20px 0 80px}
    
    /* Elementos UI mejorados */
    .card{background:var(--card); border:1px solid rgba(255,255,255,.08); border-radius:var(--radius); box-shadow:var(--shadow); padding:18px; margin:12px 0}
    .grid{display:grid; gap:14px}
    @media(min-width:880px){.grid.cols-2{grid-template-columns:1fr 1fr}}

    .chip{display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius:999px; background:rgba(126,34,206,.15); border:1px solid rgba(126,34,206,.45); color:#e9def7; font-weight:600; font-size:.85rem}
    .btn{cursor:pointer; border:none; font-weight:700; color:#fff; padding:12px 18px; border-radius:12px; box-shadow:var(--shadow); background:linear-gradient(135deg, var(--accent), var(--accent-2)); transition: all .2s ease;}
    .btn:hover{transform:translateY(-1px); box-shadow: 0 12px 30px rgba(0,0,0,.4)}
    .btn:active{transform:translateY(0)}
    .btn.ghost{background:transparent; border:1px solid rgba(255,255,255,.16); color:var(--text)}
    .btn.small{padding:8px 14px; font-weight:600; font-size:.9rem}

    .tag{display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:999px; background:#231836; border:1px solid rgba(255,255,255,.12); font-size:.85rem; font-weight:600}
    .tag.ok{border-color:rgba(34,197,94,.5); color:#bbf7d0}
    .tag.warn{border-color:rgba(245,158,11,.5); color:#fde68a}

    .section-head{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom:12px}
    .section-head h2{margin:0; font-size:1.3rem}

    /* Home/Dashboard mejorado */
    .dashboard{text-align:center; padding:20px 0}
    .week-card{
      background:linear-gradient(135deg, rgba(126,34,206,.15), rgba(236,72,153,.15)); 
      border:1px solid rgba(126,34,206,.3); border-radius:var(--radius); padding:24px; margin:20px 0;
    }
    .week-number{font-size:2.2rem; font-weight:900; margin:0; background:linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent}
    .week-focus{font-size:1.1rem; color:var(--accent-2); margin:8px 0; font-weight:600}

    .day-checklist{display:grid; gap:8px; margin:16px 0}
    .day{display:flex; align-items:flex-start; gap:12px; padding:12px; border-radius:12px; background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); transition: all .2s ease}
    .day:hover{background:rgba(255,255,255,.08)}
    .day input[type="checkbox"]{margin-top:4px; transform:scale(1.3); accent-color:var(--accent)}
    .day.done{opacity:.65; background:rgba(34,197,94,.1); border-color:rgba(34,197,94,.3)}
    .day.done .day-content{text-decoration:line-through}

    .progress{height:8px; background:#231836; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.12); margin:12px 0}
    .progress > i{display:block; height:100%; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .3s ease}

    /* Timer mejorado */
    .timer{display:grid; gap:12px; justify-items:center; text-align:center}
    .timer-display{font-size:2.5rem; font-weight:900; background:linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent; margin:8px 0}
    .timer-config{display:grid; grid-template-columns:repeat(auto-fit, minmax(120px, 1fr)); gap:10px; width:100%; margin:16px 0}
    .timer-config label{display:flex; flex-direction:column; gap:6px; font-size:.9rem; font-weight:600}
    input[type="number"], select{background:#1e162a; color:var(--text); border:1px solid rgba(255,255,255,.16); border-radius:8px; padding:10px; font-size:.9rem}

    .timer-controls{display:flex; gap:10px; flex-wrap:wrap; justify-content:center}
    
    /* Footer mejorado - peque√±o y desplegable */
    .mini-footer{
      position:fixed; bottom:12px; right:12px; z-index:45;
      background:rgba(126,34,206,.9); border-radius:50px; padding:8px 12px;
      box-shadow:var(--shadow); border:1px solid rgba(255,255,255,.2);
      cursor:pointer; transition: all .3s ease; backdrop-filter: blur(12px);
    }
    .mini-footer:hover{transform:scale(1.05)}
    .mini-footer.expanded{
      bottom:12px; right:12px; left:12px; border-radius:16px; padding:16px;
      background:linear-gradient(90deg, rgba(126,34,206,.95), rgba(236,72,153,.95));
    }
    .footer-content{display:none}
    .mini-footer.expanded .footer-content{display:block}
    .footer-toggle{color:#fff; font-size:.9rem; font-weight:700; display:flex; align-items:center; gap:8px}
    .footer-controls{display:flex; gap:8px; margin-top:12px; flex-wrap:wrap}
    .footer-controls .btn{flex:1; min-width:120px}

    @media(max-width:520px){
      .timer-display{font-size:2rem}
      .footer-controls{flex-direction:column}
      .footer-controls .btn{width:100%}
    }

    details{background:rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px; margin:8px 0}
    summary{cursor:pointer; font-weight:700; padding:4px 0}

    /* Animaciones y mejoras visuales */
    @keyframes slideIn{from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)}}
    @keyframes pulse{0%, 100%{transform:scale(1)} 50%{transform:scale(1.02)}}
    .view.active{animation:slideIn .4s ease-out}
    .week-card:hover{animation:pulse 2s infinite}

    /* Responsive mejoras */
    @media(max-width:768px){
      .wrap{padding:12px}
      .hero .wrap{padding:12px; gap:10px}
      .title h1{font-size:1.15rem}
      .subtitle{font-size:.8rem}
      .section-head{flex-direction:column; align-items:flex-start; gap:8px}
    }
  </style>
</head>
<body>
  <header class="hero">
    <div class="wrap">
      <div class="title">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M12 2L20 7V17L12 22L4 17V7L12 2Z" stroke="white" stroke-width="1.5"/>
          <path d="M12 8V16M8 10L16 14" stroke="white" stroke-width="1.5"/>
        </svg>
        <div>
          <h1>Tu Rutina con Jose</h1>
          <p class="subtitle">8 semanas ¬∑ Tu guerrera interior üíú</p>
        </div>
      </div>
      <button class="hamburger" id="menuBtn" aria-label="Men√∫" aria-expanded="false" aria-controls="mnav">
        <span class="bars" aria-hidden="true"></span>
      </button>
    </div>
  </header>

  <div class="scrim" id="scrim" hidden></div>
  <nav class="mnav" id="mnav" aria-hidden="true">
    <div class="nav-header">
      <h3>Navegaci√≥n</h3>
      <button class="close-btn" id="closeMenu" aria-label="Cerrar men√∫">‚úï</button>
    </div>
    <a href="#" data-view="home" class="nav-link active">üè† Inicio</a>
    <a href="#" data-view="plan" class="nav-link">üìÖ Mi Plan Semanal</a>
    <a href="#" data-view="timer" class="nav-link">‚è±Ô∏è Timer de Comba</a>
    <a href="#" data-view="progress" class="nav-link">üìà Progresiones</a>
    <a href="#" data-view="habits" class="nav-link">ü•ó H√°bitos & Tips</a>
    <a href="#" data-view="love" class="nav-link">üíú Mensajes de Jose</a>
  </nav>

  <main class="wrap">
    <!-- Vista Home/Dashboard -->
    <div class="view active" id="home">
      <div class="dashboard">
        <div class="week-card">
          <div class="week-number">Semana <span id="currentWeek">1-2</span></div>
          <div class="week-focus" id="weekFocus">Construir base y crear h√°bito</div>
          
          <div class="progress" aria-label="Progreso semanal">
            <i id="weekProgress" style="width:0%"></i>
          </div>
          <p><span id="completedDays">0</span>/5 d√≠as completados</p>
          
          <div class="day-checklist" id="weekTasks"></div>
        </div>
        
        <div class="card">
          <h2>¬øQu√© hacer hoy?</h2>
          <div id="todayTask">
            <p>¬°Revisa tu plan semanal para ver qu√© toca hoy! üí™</p>
          </div>
          <button class="btn" onclick="showView('plan')">Ver Plan Completo</button>
        </div>
        
        <div class="card">
          <h2>Acceso R√°pido</h2>
          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn small" onclick="showView('timer')">‚è±Ô∏è Timer</button>
            <button class="btn small ghost" onclick="showView('progress')">üìà Progreso</button>
            <button class="btn small ghost" onclick="showView('love')">üíú √Ånimo</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Vista Plan Semanal -->
    <div class="view" id="plan">
      <div style="margin-bottom:16px">
        <button class="btn ghost small" onclick="showView('home')" style="display:inline-flex; align-items:center; gap:6px">
          ‚Üê Volver al inicio
        </button>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Tu Plan de Esta Semana</h2>
          <span class="tag warn" id="weekPhase">Semanas 1-2: Base</span>
        </div>
        
        <div class="day-checklist" id="fullWeekPlan"></div>
        
        <div style="margin-top:20px; padding:16px; background:rgba(126,34,206,.1); border-radius:12px; border:1px solid rgba(126,34,206,.3)">
          <h3 style="margin:0 0 8px; color:var(--accent-2)">Recordatorio de Jose:</h3>
          <p style="margin:0"><strong>RPE 6-7/10:</strong> Que cueste pero puedas hablar. Si duele alguna articulaci√≥n, para y baja intensidad. ¬°Consistencia sobre perfecci√≥n! üíú</p>
        </div>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Calentamiento (Siempre antes de empezar)</h2>
          <span class="chip">8-10 min</span>
        </div>
        
        <div style="background:rgba(245,158,11,.1); padding:12px; border-radius:10px; border:1px solid rgba(245,158,11,.3); margin-bottom:16px">
          <p style="margin:0; color:#fde68a; font-weight:600">‚ö†Ô∏è Nunca te saltes el calentamiento. Es tu seguro anti-lesiones.</p>
        </div>
        
        <div style="display:grid; gap:12px">
          <div style="padding:12px; background:rgba(255,255,255,.02); border-radius:8px; border:1px solid rgba(255,255,255,.08)">
            <h4 style="margin:0 0 8px; color:var(--accent-2)">1. Activaci√≥n Cardiovascular (2-3 min)</h4>
            <p style="margin:0; font-size:.9rem">Paseo √°gil por casa o al aire libre. Que el coraz√≥n se despierte gradualmente.</p>
          </div>
          
          <div style="padding:12px; background:rgba(255,255,255,.02); border-radius:8px; border:1px solid rgba(255,255,255,.08)">
            <h4 style="margin:0 0 8px; color:var(--accent-2)">2. Movilidad Articular (3-4 min)</h4>
            <ul style="margin:8px 0; font-size:.9rem">
              <li><strong>Hombros:</strong> 8 c√≠rculos adelante, 8 atr√°s</li>
              <li><strong>Cadera:</strong> 8 c√≠rculos cada lado</li>
              <li><strong>Sentadilla parcial:</strong> 6-8 reps, baja solo hasta donde puedas sin dolor</li>
              <li><strong>Balanceos de brazos:</strong> 8 adelante y atr√°s</li>
            </ul>
          </div>
          
          <div style="padding:12px; background:rgba(255,255,255,.02); border-radius:8px; border:1px solid rgba(255,255,255,.08)">
            <h4 style="margin:0 0 8px; color:var(--accent-2)">3. Activaci√≥n Muscular (2-3 min)</h4>
            <ul style="margin:8px 0; font-size:.9rem">
              <li><strong>Puente de gl√∫teo:</strong> 10 reps lentas, aprieta arriba 2s</li>
              <li><strong>Plancha inclinada:</strong> 20-30s, manos en sof√°/cama</li>
              <li><strong>Activaci√≥n core:</strong> 10 respiraciones profundas en plancha</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Detalles de Ejercicios</h2>
          <span class="tag">T√©cnica correcta</span>
        </div>
        
        <details>
          <summary><strong>Flexiones Inclinadas</strong> - Tu ejercicio estrella üí™</summary>
          <div style="padding:12px 0">
            <p><strong>Posici√≥n:</strong></p>
            <ul style="font-size:.9rem">
              <li>Manos en sof√°/cama/escal√≥n, m√°s alto = m√°s f√°cil</li>
              <li>Cuerpo recto desde cabeza a talones</li>
              <li>Manos alineadas con el pecho, dedos separados</li>
            </ul>
            <p><strong>Ejecuci√≥n:</strong></p>
            <ul style="font-size:.9rem">
              <li>Baja lento (2-3 segundos) hasta que el pecho casi toque</li>
              <li>Sube fuerte pero controlado (1-2 segundos)</li>
              <li>Respira: inspira bajando, expira subiendo</li>
            </ul>
          </div>
        </details>
        
        <details>
          <summary><strong>Sentadilla a Caja</strong> - Piernas de guerrera ü¶µ</summary>
          <div style="padding:12px 0">
            <p><strong>Setup:</strong></p>
            <ul style="font-size:.9rem">
              <li>Caja/silla detr√°s, altura que puedas sentarte c√≥modamente</li>
              <li>Pies ancho de hombros, puntas ligeramente hacia fuera</li>
              <li>Brazos extendidos adelante para equilibrio</li>
            </ul>
            <p><strong>Movimiento:</strong></p>
            <ul style="font-size:.9rem">
              <li>Inicia movimiento sacando el trasero hacia atr√°s</li>
              <li>Baja hasta tocar la caja suavemente (no te dejes caer)</li>
              <li>Presiona talones para subir, gl√∫teos apretados</li>
            </ul>
          </div>
        </details>
        
        <details>
          <summary><strong>Comba/Saltos</strong> - Cardio divertido üéØ</summary>
          <div style="padding:12px 0">
            <p><strong>T√©cnica b√°sica:</strong></p>
            <ul style="font-size:.9rem">
              <li>Saltos peque√±os, solo despegar pies del suelo</li>
              <li>Aterrizaje suave en metatarsos (no talones)</li>
              <li>Codos pegados al cuerpo, solo mueven mu√±ecas</li>
              <li>Si no tienes comba: saltos en el sitio siguiendo el ritmo</li>
            </ul>
          </div>
        </details>
        
        <details>
          <summary><strong>Plancha</strong> - Core de acero üõ°Ô∏è</summary>
          <div style="padding:12px 0">
            <p><strong>Posici√≥n perfecta:</strong></p>
            <ul style="font-size:.9rem">
              <li>Codos bajo hombros, antebrazos paralelos</li>
              <li>Cuerpo recto: cabeza, hombros, cadera, talones alineados</li>
              <li>Abdomen contra√≠do, gl√∫teos apretados</li>
              <li>Respiraci√≥n normal, no aguantes la respiraci√≥n</li>
            </ul>
          </div>
        </details>
      </div>
    </div>

    <!-- Vista Timer -->
    <div class="view" id="timer">
      <div style="margin-bottom:16px">
        <button class="btn ghost small" onclick="showView('home')" style="display:inline-flex; align-items:center; gap:6px">
          ‚Üê Volver al inicio
        </button>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Timer de Comba</h2>
          <span class="tag ok">Listo para usar</span>
        </div>
        
        <div class="timer">
          <div class="timer-display" id="display">Preparada</div>
          
          <div class="timer-config">
            <label>Trabajo (seg)
              <input id="onSec" type="number" min="10" max="60" step="5" value="20" />
            </label>
            <label>Descanso (seg)
              <input id="offSec" type="number" min="10" max="120" step="5" value="40" />
            </label>
            <label>Rondas
              <input id="rounds" type="number" min="1" max="15" step="1" value="6" />
            </label>
            <label>Sonido
              <select id="beep">
                <option value="both">Beep + vibrar</option>
                <option value="beep">Solo beep</option>
                <option value="vibrate">Solo vibrar</option>
                <option value="off">Silencio</option>
              </select>
            </label>
          </div>
          
          <div class="timer-controls">
            <button class="btn" id="startBtn">‚ñ∂Ô∏è Iniciar</button>
            <button class="btn ghost" id="pauseBtn" disabled>‚è∏Ô∏è Pausa</button>
            <button class="btn ghost" id="resetBtn" disabled>üîÑ Reset</button>
          </div>
          
          <div class="progress" aria-label="Progreso del intervalo">
            <i id="timerBar"></i>
          </div>
          
          <div style="background:rgba(236,72,153,.1); padding:12px; border-radius:10px; margin-top:16px">
            <p style="margin:0; font-size:.9rem"><strong>Consejo:</strong> Saltos bajitos, aterrizaje suave, codos pegados. ¬°T√∫ puedes! üí™</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Vista Progresiones -->
    <div class="view" id="progress">
      <div style="margin-bottom:16px">
        <button class="btn ghost small" onclick="showView('home')" style="display:inline-flex; align-items:center; gap:6px">
          ‚Üê Volver al inicio
        </button>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Progresi√≥n de Flexiones</h2>
          <span class="tag">Meta: 3√ó10</span>
        </div>
        <div style="background:rgba(255,255,255,.02); padding:16px; border-radius:12px; margin:12px 0">
          <ol>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="1"> Flexiones en pared</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="2"> Barra/banco alto</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="3"> Banco m√°s bajo</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="4"> En rodillas</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="5"> Exc√©ntricas (bajar lento)</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="6"> Suelo asistidas</label></li>
            <li><label style="display:flex; align-items:center; gap:8px; margin:6px 0"><input type="checkbox" class="step" data-step="7"> ¬°Flexi√≥n completa!</label></li>
          </ol>
          <small style="color:var(--muted)">Sube de nivel cuando consigas 3√ó10 limpias en dos sesiones seguidas.</small>
        </div>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Progresi√≥n por Semanas</h2>
        </div>
        
        <details open>
          <summary><strong>Semanas 1-2:</strong> Construir base</summary>
          <p>T√©cnica perfecta, rangos bajos. Aprende el ritmo y crea el h√°bito.</p>
        </details>
        
        <details>
          <summary><strong>Semanas 3-4:</strong> M√°s volumen</summary>
          <p>Suma 1-2 reps por serie o a√±ade 1 serie. Comba ‚Üí 8√ó20-30s.</p>
        </details>
        
        <details>
          <summary><strong>Semana 5:</strong> Descanso activo</summary>
          <p>Reduce a 70% del volumen. M√°s paseos y movilidad.</p>
        </details>
        
        <details>
          <summary><strong>Semanas 6-7:</strong> Subir dificultad</summary>
          <p>Flexiones: baja altura. Sentadillas: baja caja. Comba: 10√ó30s.</p>
        </details>
        
        <details>
          <summary><strong>Semana 8:</strong> ¬°Records personales!</summary>
          <p>Mant√©n dificultad pero marca tus mejores tiempos y repeticiones.</p>
        </details>
      </div>
    </div>

    <!-- Vista H√°bitos -->
    <div class="view" id="habits">
      <div style="margin-bottom:16px">
        <button class="btn ghost small" onclick="showView('home')" style="display:inline-flex; align-items:center; gap:6px">
          ‚Üê Volver al inicio
        </button>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Nutrici√≥n Smart</h2>
          <span class="tag ok">Sostenible</span>
        </div>
        <ul style="list-style:none; padding:0">
          <li style="padding:8px 0; border-bottom:1px solid rgba(255,255,255,.1)">üçΩÔ∏è <strong>D√©ficit suave:</strong> 300-500 kcal/d√≠a</li>
          <li style="padding:8px 0; border-bottom:1px solid rgba(255,255,255,.1)">ü•ó <strong>Plato post-entreno:</strong> ¬Ω verduras, ¬º prote√≠na, ¬º carbos</li>
          <li style="padding:8px 0; border-bottom:1px solid rgba(255,255,255,.1)">ü•õ <strong>Prote√≠na:</strong> 1.2-1.6g/kg peso corporal</li>
          <li style="padding:8px 0; border-bottom:1px solid rgba(255,255,255,.1)">üíß <strong>Agua:</strong> 6-8 vasos/d√≠a</li>
          <li style="padding:8px 0; border-bottom:1px solid rgba(255,255,255,.1)">üò¥ <strong>Sue√±o:</strong> 7-9h, horario fijo</li>
          <li style="padding:8px 0">üëü <strong>Pasos:</strong> 7-10k diarios (vuestros paseos cuentan)</li>
        </ul>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>¬øVa bien el progreso?</h2>
        </div>
        <div style="background:rgba(34,197,94,.1); padding:16px; border-radius:12px; border:1px solid rgba(34,197,94,.3)">
          <h4 style="margin:0 0 8px; color:#bbf7d0">‚úÖ Se√±ales positivas cada 2 semanas:</h4>
          <ul style="margin:8px 0; color:#bbf7d0">
            <li>M√°s repeticiones con misma dificultad</li>
            <li>Descansos m√°s cortos, mejor control</li>
            <li>Ropa m√°s suelta, m√°s energ√≠a</li>
            <li>Sue√±o m√°s profundo</li>
          </ul>
        </div>
        
        <details style="margin-top:16px">
          <summary>Mini FAQ</summary>
          <ul>
            <li><strong>¬øSolo 25-30 min disponibles?</strong> Haz el circuito del viernes + paseo 10 min.</li>
            <li><strong>¬øRodilla molesta?</strong> Sube altura de caja, reduce rango, refuerza gl√∫teo.</li>
            <li><strong>¬øLa comba agobia?</strong> Alterna 10 saltos y 10 marchas en el sitio.</li>
          </ul>
        </details>
      </div>
    </div>

    <!-- Vista Mensajes de Amor -->
    <div class="view" id="love">
      <div style="margin-bottom:16px">
        <button class="btn ghost small" onclick="showView('home')" style="display:inline-flex; align-items:center; gap:6px">
          ‚Üê Volver al inicio
        </button>
      </div>
      
      <div class="card">
        <div class="section-head">
          <h2>Mensajes de Jose para ti</h2>
          <span class="tag ok">üíú Motivaci√≥n</span>
        </div>
        
        <div id="loveMsgContainer" style="min-height:120px; background:linear-gradient(135deg, rgba(236,72,153,.12), rgba(126,34,206,.12)); padding:20px; border-radius:16px; border:1px solid rgba(236,72,153,.3); text-align:center; margin:16px 0">
          <p id="loveMessage" style="font-size:1.1rem; line-height:1.6; margin:0; color:#ffd9eb; font-weight:600"></p>
          <small style="color:var(--accent-2); margin-top:12px; display:block">‚Äî Jose üíú</small>
        </div>
        
        <div style="text-align:center">
          <button class="btn" id="newLoveMsg">üíú Nuevo mensaje</button>
        </div>
        
        <div style="background:rgba(255,255,255,.04); padding:16px; border-radius:12px; margin-top:20px">
          <h4 style="margin:0 0 12px; color:var(--accent-2)">Recuerda siempre:</h4>
          <p style="margin:0">Estoy contigo en cada paso. Si hoy cuesta, nos damos la mano y lo sacamos juntos. <strong>Yo s√© que puedes</strong>. üíú</p>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer mini desplegable -->
  <div class="mini-footer" id="miniFooter">
    <div class="footer-toggle">
      <span id="footerText">Jose te acompa√±a üíú</span>
      <span id="footerArrow">‚Üó</span>
    </div>
    <div class="footer-content">
      <p style="margin:0 0 8px; font-weight:600">¬øC√≥mo va la semana?</p>
      <small style="opacity:.9">Semana actual: <span id="footerWeek">1-2</span> | <span id="footerProgress">0/5 d√≠as</span></small>
      <div class="footer-controls">
        <button class="btn small" id="completeWeek">‚úÖ Cerrar Semana</button>
        <button class="btn small ghost" id="resetWeek">üîÑ Reiniciar</button>
      </div>
    </div>
  </div>

<script>
(function(){
  'use strict';
  
  // Estado global
  const state = {
    currentView: 'home',
    currentWeek: 1,
    weekData: {},
    timerState: { phase:'idle', tLeft:0, round:0, int:null, paused:false }
  };
  
  const STORAGE = {
    WEEK: 'jose-routine-week-v2',
    WEEK_NUM: 'jose-routine-week-num-v2',
    PUSHUPS: 'jose-routine-pushups-v2'
  };

  // Datos de las semanas
  const WEEK_PLANS = {
    '1-2': {
      title: 'Semanas 1-2: Construir Base',
      focus: 'Crear h√°bito y t√©cnica b√°sica',
      days: [
        { name: 'Lunes', desc: 'Empuje + Core', detail: 'Flexiones inclinadas 3√ó6-8 ‚Ä¢ Press pared 3√ó15-20s ‚Ä¢ Plancha 3√ó20-30s ‚Ä¢ Paseo 10-15min' },
        { name: 'Martes', desc: 'Paseo + Movilidad', detail: 'Paseo 30-45min ‚Ä¢ Estiramientos 10min' },
        { name: 'Mi√©rcoles', desc: 'Pierna + Comba', detail: 'Sentadilla a caja 3√ó8-10 ‚Ä¢ Zancadas 3√ó6/lado ‚Ä¢ Comba 6√ó20s/40s ‚Ä¢ Dead bug 2√ó6/lado' },
        { name: 'Jueves', desc: 'Paseo + Tir√≥n', detail: 'Paseo 20-30min ‚Ä¢ Remo invertido 3√ó6-8 ‚Ä¢ Face pull goma 2√ó12-15' },
        { name: 'Viernes', desc: 'Circuito Mixto', detail: '4 rondas: Flexi√≥n inclinada 6-8 ‚Ä¢ Sentadilla 8-10 ‚Ä¢ Comba 20-30s ‚Ä¢ Plancha 20-30s + Paseo 10min' }
      ]
    },
    '3-4': {
      title: 'Semanas 3-4: M√°s Volumen',
      focus: 'Aumentar repeticiones y series',
      days: [
        { name: 'Lunes', desc: 'Empuje + Core', detail: 'Flexiones inclinadas 3√ó8-10 ‚Ä¢ Press pared 4√ó20s ‚Ä¢ Plancha 3√ó30-40s ‚Ä¢ Paseo 15-20min' },
        { name: 'Martes', desc: 'Paseo + Movilidad', detail: 'Paseo 35-50min ‚Ä¢ Estiramientos 12min' },
        { name: 'Mi√©rcoles', desc: 'Pierna + Comba', detail: 'Sentadilla a caja 3√ó10-12 ‚Ä¢ Zancadas 3√ó8/lado ‚Ä¢ Comba 8√ó25s/35s ‚Ä¢ Dead bug 3√ó8/lado' },
        { name: 'Jueves', desc: 'Paseo + Tir√≥n', detail: 'Paseo 25-35min ‚Ä¢ Remo invertido 3√ó8-10 ‚Ä¢ Face pull goma 3√ó15' },
        { name: 'Viernes', desc: 'Circuito Mixto', detail: '5 rondas: Flexi√≥n inclinada 8-10 ‚Ä¢ Sentadilla 10-12 ‚Ä¢ Comba 25-30s ‚Ä¢ Plancha 30-40s + Paseo 15min' }
      ]
    }
  };

  // Mensajes de amor de Jose
  const LOVE_MESSAGES = [
    'Eres constante y valiente. Estoy orgulloso de ti.',
    'Hoy no hace falta ser perfecta, solo avanzar. A tu ritmo.',
    'Cuando dudas, m√≠rame: yo no dudo de ti. Puedes.',
    'Cada salto de comba es un "s√≠" a tu fuerza.',
    'Si el d√≠a pesa, te presto mis ganas. Vamos juntos.',
    'Tu progreso es inevitable: est√°s haciendo el trabajo.',
    'Respira, sonr√≠e y conf√≠a. Estoy a tu lado.',
    'Tu disciplina de hoy es tu orgullo de ma√±ana.',
    'Cada flexi√≥n te acerca m√°s a tu guerrera interior.',
    'No importa la velocidad, importa que no pares.',
    'Eres m√°s fuerte de lo que crees. Siempre lo has sido.',
    'Hoy sumamos, aunque sea poquito. Cuenta todo.'
  ];

  // Inicializaci√≥n
  function init() {
    loadWeekData();
    setupEventListeners();
    renderCurrentWeek();
    setupTimer();
    setupPushupProgress();
    showLoveMessage();
    updateFooter();
  }

  // Gesti√≥n de vistas
  function showView(viewName) {
    state.currentView = viewName;
    
    // Actualizar vistas
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
    document.getElementById(viewName).classList.add('active');
    
    // Actualizar navegaci√≥n
    document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
    document.querySelector(`[data-view="${viewName}"]`).classList.add('active');
    
    // Cerrar men√∫ m√≥vil
    closeMenu();
    
    // Scroll al top suave
    window.scrollTo({top: 0, behavior: 'smooth'});
  }

  // Cargar datos guardados
  function loadWeekData() {
    const saved = localStorage.getItem(STORAGE.WEEK);
    state.weekData = saved ? JSON.parse(saved) : {};
    
    const weekNum = localStorage.getItem(STORAGE.WEEK_NUM);
    state.currentWeek = weekNum ? parseInt(weekNum) : 1;
  }

  // Guardar datos
  function saveWeekData() {
    localStorage.setItem(STORAGE.WEEK, JSON.stringify(state.weekData));
    localStorage.setItem(STORAGE.WEEK_NUM, state.currentWeek.toString());
  }

  // Renderizar semana actual
  function renderCurrentWeek() {
    const weekKey = state.currentWeek <= 2 ? '1-2' : '3-4';
    const weekPlan = WEEK_PLANS[weekKey];
    
    // Actualizar elementos de la semana
    const currentWeekEl = document.getElementById('currentWeek');
    const weekFocusEl = document.getElementById('weekFocus');
    const weekPhaseEl = document.getElementById('weekPhase');
    
    if (currentWeekEl) currentWeekEl.textContent = weekKey;
    if (weekFocusEl) weekFocusEl.textContent = weekPlan.focus;
    if (weekPhaseEl) weekPhaseEl.textContent = weekPlan.title;
    
    // Renderizar d√≠as en home
    const homeContainer = document.getElementById('weekTasks');
    const planContainer = document.getElementById('fullWeekPlan');
    
    [homeContainer, planContainer].forEach(container => {
      if (!container) return;
      
      container.innerHTML = weekPlan.days.map((day, index) => `
        <label class="day ${state.weekData[index] ? 'done' : ''}">
          <input type="checkbox" data-day="${index}" ${state.weekData[index] ? 'checked' : ''}>
          <div class="day-content">
            <strong>${day.name} ‚Äì ${day.desc}</strong><br>
            <small style="color:var(--muted)">${day.detail}</small>
          </div>
        </label>
      `).join('');
      
      // Event listeners para checkboxes
      container.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        cb.addEventListener('change', (e) => {
          const dayIndex = parseInt(e.target.dataset.day);
          state.weekData[dayIndex] = e.target.checked;
          
          e.target.parentElement.classList.toggle('done', e.target.checked);
          saveWeekData();
          updateProgress();
          
          if (e.target.checked) showConfetti();
        });
      });
    });
    
    updateProgress();
    updateTodayTask();
  }

  // Actualizar progreso
  function updateProgress() {
    const completed = Object.values(state.weekData).filter(Boolean).length;
    const total = 5;
    const percentage = (completed / total) * 100;
    
    const weekProgressEl = document.getElementById('weekProgress');
    const completedDaysEl = document.getElementById('completedDays');
    
    if (weekProgressEl) weekProgressEl.style.width = `${percentage}%`;
    if (completedDaysEl) completedDaysEl.textContent = completed;
    
    updateFooter();
  }

  // Actualizar tarea de hoy
  function updateTodayTask() {
    const today = new Date().getDay(); // 0 = domingo
    const dayMap = {1: 0, 2: 1, 3: 2, 4: 3, 5: 4}; // lun-vie
    const todayIndex = dayMap[today];
    
    const container = document.getElementById('todayTask');
    if (!container) return;
    
    if (todayIndex !== undefined) {
      const weekKey = state.currentWeek <= 2 ? '1-2' : '3-4';
      const todayTask = WEEK_PLANS[weekKey].days[todayIndex];
      const isDone = state.weekData[todayIndex];
      
      container.innerHTML = `
        <div style="padding:16px; background:${isDone ? 'rgba(34,197,94,.1)' : 'rgba(126,34,206,.1)'}; border-radius:12px; border:1px solid ${isDone ? 'rgba(34,197,94,.3)' : 'rgba(126,34,206,.3)'}">
          <h4 style="margin:0 0 8px; color:${isDone ? '#bbf7d0' : 'var(--accent-2)'}">${isDone ? '‚úÖ' : 'üí™'} ${todayTask.name}</h4>
          <p style="margin:0; font-weight:600">${todayTask.desc}</p>
          <small style="color:var(--muted); margin-top:8px; display:block">${todayTask.detail}</small>
        </div>
      `;
    } else {
      container.innerHTML = `
        <div style="padding:16px; background:rgba(245,158,11,.1); border-radius:12px; border:1px solid rgba(245,158,11,.3)">
          <p style="margin:0; color:#fde68a">üåÖ ¬°Es fin de semana! Tiempo para paseos y descanso activo.</p>
        </div>
      `;
    }
  }

  // Configurar event listeners
  function setupEventListeners() {
    // Navegaci√≥n
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        showView(link.dataset.view);
      });
    });
    
    // Men√∫ hamburguesa
    const menuBtn = document.getElementById('menuBtn');
    const mnav = document.getElementById('mnav');
    const scrim = document.getElementById('scrim');
    const closeMenuBtn = document.getElementById('closeMenu');
    
    if (menuBtn) menuBtn.addEventListener('click', toggleMenu);
    if (closeMenuBtn) closeMenuBtn.addEventListener('click', closeMenu);
    if (scrim) scrim.addEventListener('click', closeMenu);
    
    // Footer - funcionalidad simplificada y robusta
    const miniFooter = document.getElementById('miniFooter');
    
    if (miniFooter) {
      // Click en todo el footer para expandir/contraer
      miniFooter.addEventListener('click', (e) => {
        // Solo expandir/contraer si se hace clic en el toggle, no en los botones
        if (e.target.closest('.footer-controls')) {
          return; // No hacer nada si se hace clic en los botones
        }
        
        const isExpanded = miniFooter.classList.contains('expanded');
        const footerArrow = document.getElementById('footerArrow');
        
        if (isExpanded) {
          miniFooter.classList.remove('expanded');
          if (footerArrow) footerArrow.textContent = '‚Üó';
        } else {
          miniFooter.classList.add('expanded');
          if (footerArrow) footerArrow.textContent = '‚Üò';
        }
      });
      
      // Cerrar footer al hacer clic fuera
      document.addEventListener('click', (e) => {
        if (!miniFooter.contains(e.target) && miniFooter.classList.contains('expanded')) {
          miniFooter.classList.remove('expanded');
          const footerArrow = document.getElementById('footerArrow');
          if (footerArrow) footerArrow.textContent = '‚Üó';
        }
      });
    }
    
    // Botones del footer
    const completeWeekBtn = document.getElementById('completeWeek');
    const resetWeekBtn = document.getElementById('resetWeek');
    
    if (completeWeekBtn) completeWeekBtn.addEventListener('click', completeWeek);
    if (resetWeekBtn) resetWeekBtn.addEventListener('click', resetWeek);
    
    // Mensajes de amor
    const newLoveMsgBtn = document.getElementById('newLoveMsg');
    if (newLoveMsgBtn) newLoveMsgBtn.addEventListener('click', showLoveMessage);
    
    // Auto-hide header
    setupHeaderAutoHide();
  }

  function toggleMenu() {
    const menuBtn = document.getElementById('menuBtn');
    const mnav = document.getElementById('mnav');
    const scrim = document.getElementById('scrim');
    
    const isOpen = mnav.classList.contains('open');
    
    if (isOpen) {
      closeMenu();
    } else {
      mnav.classList.add('open');
      scrim.classList.add('show');
      scrim.removeAttribute('hidden');
      menuBtn.classList.add('active');
      menuBtn.setAttribute('aria-expanded', 'true');
      document.body.classList.add('menu-open');
    }
  }

  function closeMenu() {
    const menuBtn = document.getElementById('menuBtn');
    const mnav = document.getElementById('mnav');
    const scrim = document.getElementById('scrim');
    
    mnav.classList.remove('open');
    scrim.classList.remove('show');
    menuBtn.classList.remove('active');
    menuBtn.setAttribute('aria-expanded', 'false');
    document.body.classList.remove('menu-open');
    
    setTimeout(() => scrim.setAttribute('hidden', ''), 250);
  }

  // Auto-hide header mejorado
  function setupHeaderAutoHide() {
    let lastY = window.pageYOffset;
    let ticking = false;
    
    function updateHeader() {
      const currentY = window.pageYOffset;
      const header = document.querySelector('header.hero');
      const delta = currentY - lastY;
      
      if (currentY <= 50 || delta < -5) {
        header.classList.remove('hide');
      } else if (delta > 5 && currentY > 100) {
        header.classList.add('hide');
      }
      
      lastY = currentY;
      ticking = false;
    }
    
    window.addEventListener('scroll', () => {
      if (!ticking) {
        requestAnimationFrame(updateHeader);
        ticking = true;
      }
    }, { passive: true });
  }

  // Timer de comba
  function setupTimer() {
    const display = document.getElementById('display');
    const startBtn = document.getElementById('startBtn');
    const pauseBtn = document.getElementById('pauseBtn');
    const resetBtn = document.getElementById('resetBtn');
    const timerBar = document.getElementById('timerBar');
    const onSec = document.getElementById('onSec');
    const offSec = document.getElementById('offSec');
    const rounds = document.getElementById('rounds');
    const beep = document.getElementById('beep');
    
    // Verificar que todos los elementos existan
    if (!display || !startBtn || !pauseBtn || !resetBtn || !timerBar || !onSec || !offSec || !rounds || !beep) {
      return; // Salir si alg√∫n elemento no existe
    }
    
    let ctx, osc;
    
    function updateDisplay() {
      const s = state.timerState;
      display.textContent = s.phase === 'idle' ? 'Preparada' : 
        `${s.phase} ‚Ä¢ Ronda ${s.round}/${rounds.value} ‚Ä¢ ${s.tLeft}s`;
    }
    
    function doBeep() {
      const beepSetting = beep.value;
      if (beepSetting === 'off' || beepSetting === 'vibrate') return;
      
      try {
        ctx = ctx || new (window.AudioContext || window.webkitAudioContext)();
        osc = ctx.createOscillator();
        const gain = ctx.createGain();
        
        osc.frequency.value = state.timerState.phase === 'ON' ? 880 : 520;
        gain.gain.setValueAtTime(0.001, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.2, ctx.currentTime + 0.01);
        osc.connect(gain).connect(ctx.destination);
        osc.start();
        
        setTimeout(() => osc.stop(), 150);
      } catch (e) {}
    }
    
    function doVibrate() {
      const beepSetting = beep.value;
      if ((beepSetting === 'off' || beepSetting === 'beep') || !('vibrate' in navigator)) return;
      navigator.vibrate(state.timerState.phase === 'ON' ? [120, 40, 120] : 80);
    }
    
    function setPhase(phase, seconds) {
      state.timerState.phase = phase;
      state.timerState.tLeft = seconds;
      updateDisplay();
      doBeep();
      doVibrate();
    }
    
    function tick() {
      if (state.timerState.paused) return;
      
      state.timerState.tLeft--;
      const duration = state.timerState.phase === 'ON' ? 
        parseInt(onSec.value) : 
        parseInt(offSec.value);
      
      timerBar.style.width = `${((duration - state.timerState.tLeft) / duration) * 100}%`;
      updateDisplay();
      
      if (state.timerState.tLeft <= 0) {
        clearInterval(state.timerState.int);
        if (state.timerState.phase === 'ON') startOff();
        else startOnOrFinish();
      }
    }
    
    function startOnOrFinish() {
      const totalRounds = parseInt(rounds.value);
      if (state.timerState.round >= totalRounds) {
        display.textContent = '¬°Completado! üéâ';
        showConfetti(40);
        startBtn.disabled = false;
        pauseBtn.disabled = true;
        resetBtn.disabled = false;
        return;
      }
      
      state.timerState.round++;
      setPhase('ON', parseInt(onSec.value));
      timerBar.style.width = '0%';
      state.timerState.int = setInterval(tick, 1000);
    }
    
    function startOff() {
      setPhase('OFF', parseInt(offSec.value));
      timerBar.style.width = '0%';
      state.timerState.int = setInterval(tick, 1000);
    }
    
    startBtn.addEventListener('click', () => {
      if (state.timerState.phase === 'idle') {
        state.timerState.round = 0;
        startOnOrFinish();
        startBtn.disabled = true;
        pauseBtn.disabled = false;
        resetBtn.disabled = false;
      } else if (state.timerState.paused) {
        state.timerState.paused = false;
        state.timerState.int = setInterval(tick, 1000);
        pauseBtn.textContent = '‚è∏Ô∏è Pausa';
      }
    });
    
    pauseBtn.addEventListener('click', () => {
      if (state.timerState.phase === 'idle') return;
      
      state.timerState.paused = !state.timerState.paused;
      if (state.timerState.paused) {
        clearInterval(state.timerState.int);
        pauseBtn.textContent = '‚ñ∂Ô∏è Reanudar';
      } else {
        state.timerState.int = setInterval(tick, 1000);
        pauseBtn.textContent = '‚è∏Ô∏è Pausa';
      }
    });
    
    resetBtn.addEventListener('click', () => {
      clearInterval(state.timerState.int);
      state.timerState = { phase: 'idle', tLeft: 0, round: 0, int: null, paused: false };
      timerBar.style.width = '0%';
      updateDisplay();
      startBtn.disabled = false;
      pauseBtn.disabled = true;
      resetBtn.disabled = true;
      pauseBtn.textContent = '‚è∏Ô∏è Pausa';
    });
  }

  // Progreso de flexiones
  function setupPushupProgress() {
    const steps = document.querySelectorAll('.step');
    if (steps.length === 0) return; // Salir si no hay elementos
    
    const saved = localStorage.getItem(STORAGE.PUSHUPS);
    const stepData = saved ? JSON.parse(saved) : {};
    
    steps.forEach(step => {
      if (stepData[step.dataset.step]) {
        step.checked = true;
      }
      
      step.addEventListener('change', () => {
        stepData[step.dataset.step] = step.checked;
        localStorage.setItem(STORAGE.PUSHUPS, JSON.stringify(stepData));
      });
    });
  }

  // Mostrar mensaje de amor
  function showLoveMessage() {
    const message = LOVE_MESSAGES[Math.floor(Math.random() * LOVE_MESSAGES.length)];
    const loveMessageEl = document.getElementById('loveMessage');
    if (loveMessageEl) {
      loveMessageEl.textContent = message;
    }
  }

  // Cerrar semana
  function completeWeek() {
    state.currentWeek++;
    state.weekData = {};
    saveWeekData();
    renderCurrentWeek();
    showConfetti(50);
    
    // Cerrar footer
    document.getElementById('miniFooter').classList.remove('expanded');
    document.getElementById('footerArrow').textContent = '‚Üó';
  }

  // Resetear semana
  function resetWeek() {
    state.weekData = {};
    saveWeekData();
    renderCurrentWeek();
  }

  // Actualizar footer
  function updateFooter() {
    const completed = Object.values(state.weekData).filter(Boolean).length;
    const weekKey = state.currentWeek <= 2 ? '1-2' : '3-4';
    
    const footerWeekEl = document.getElementById('footerWeek');
    const footerProgressEl = document.getElementById('footerProgress');
    
    if (footerWeekEl) footerWeekEl.textContent = weekKey;
    if (footerProgressEl) footerProgressEl.textContent = `${completed}/5 d√≠as`;
  }

  // Confetti
  function showConfetti(count = 20) {
    const colors = ['var(--accent)', 'var(--accent-2)', '#22c55e'];
    
    for (let i = 0; i < count; i++) {
      const confetti = document.createElement('div');
      const size = Math.random() * 8 + 4;
      
      confetti.style.cssText = `
        position: fixed;
        width: ${size}px;
        height: ${size}px;
        background: ${colors[Math.floor(Math.random() * colors.length)]};
        left: ${Math.random() * 100}%;
        top: -20px;
        border-radius: 50%;
        pointer-events: none;
        z-index: 1000;
      `;
      
      document.body.appendChild(confetti);
      
      const animation = confetti.animate([
        { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
        { transform: `translateY(${window.innerHeight + 100}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
      ], {
        duration: 2000 + Math.random() * 1000,
        easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
      });
      
      animation.onfinish = () => confetti.remove();
    }
  }

  // Navegaci√≥n global
  window.showView = showView;

  // Inicializar cuando est√© listo
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

})();
</script>
</body>
</html>